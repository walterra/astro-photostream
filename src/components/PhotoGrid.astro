---
import type { PhotoGridProps } from '../types.js';
import PhotoCard from './PhotoCard.astro';

interface Props extends PhotoGridProps {}

const { 
  photos, 
  columns = {
    mobile: 2,
    tablet: 3,
    desktop: 4
  },
  class: className = ''
} = Astro.props;

// Extract column configuration
const { mobile = 2, tablet = 3, desktop = 4 } = columns;

// Map to Tailwind classes like reference implementation
const gridClasses = {
  2: "grid-cols-1 sm:grid-cols-2",
  3: "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3", 
  4: "grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",
};

// Use desktop columns as primary setting
const gridClass = gridClasses[desktop as keyof typeof gridClasses] || gridClasses[3];
---

<div class={`grid gap-4 ${gridClass} ${className}`}>
  {photos.map(photo => (
    <PhotoCard 
      photo={photo}
      size={desktop >= 3 ? "small" : "medium"}
      loading="lazy"
    />
  ))}
</div>