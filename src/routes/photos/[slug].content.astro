---
/**
 * Content-only individual photo page - consolidated route using shared utilities
 * Handles URLs: /photos/2018-03-10_elasticon-0001, etc.
 */
import { config } from 'virtual:astro-photostream/config';
import { LayoutComponent } from 'virtual:astro-photostream/layout-wrapper';
import { layoutProps } from 'virtual:astro-photostream/layout';
import PhotoDetailContent from '../../components/PhotoDetailContent.astro';
import { generatePhotoDetailPaths } from '../../utils/pagination.js';
import { convertToPhotoMetadata } from '../../utils/photo-data.js';
import { generatePhotoDetailSeo } from '../../utils/seo.js';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths: GetStaticPaths = async () => {
  return await generatePhotoDetailPaths();
};

// Get props from static generation
const { photo, prevPhoto, nextPhoto, photoIndex, totalPhotos } = Astro.props;

// Convert to PhotoMetadata format
const photoData = convertToPhotoMetadata(photo);


// Generate SEO metadata
const seoData = generatePhotoDetailSeo(
  photoData,
  photoIndex,
  totalPhotos,
  config.seo,
  Astro.url
);
---

<LayoutComponent {...layoutProps} title={seoData.title} description={seoData.description}>
  <PhotoDetailContent 
    photo={photo}
    photoData={photoData}
    prevPhoto={prevPhoto}
    nextPhoto={nextPhoto}
    photoIndex={photoIndex}
    totalPhotos={totalPhotos}
    config={config}
  />
</LayoutComponent>

